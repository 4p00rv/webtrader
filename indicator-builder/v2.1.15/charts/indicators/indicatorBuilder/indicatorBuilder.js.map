{"version":3,"sources":["../../../../../../src/charts/indicators/indicatorBuilder/indicatorBuilder.es6"],"names":["define","$","rv","ind_json","_","IndicatorWindow","containerIDWithHash","ind_shrt","before_add_cb","curr_ind","JSON","parse","win","init_window","state","init_state","view","bind","ind","before_add_callback","cls_obj","attr","long_display_name","dialog","autoOpen","resizable","width","height","modal","my","at","of","window","dialogClass","buttons","text","click","is_valid","checks","length","reduce","a","b","options","console","log","highcharts","series","addIndicator","short_display_name","toLowerCase","unbind","root","indicator","table","find","creatElement","row","field_name","elem","append","appendTo","input","f","option_name","default","min","max","push","inRange","growl","error","message","name","color","button","css","strokeWidth","dashStyle","appliedTo","levels","description","fields","forEach","field","type","add","event","scope","require","lvl","open","delete","lvl_cpy","slice","each","index","ele","splice","data","binders","ddslick","priority","publishes","el","publish","imagePosition","background","onSelected","selectedData","value","level","routine","remove","stroke","toggleClass","formatters","parseInt"],"mappings":"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","file":"indicatorBuilder.js","sourcesContent":["define([\"jquery\", 'common/rivetsExtra', 'text!charts/indicators/indicators.json', \"lodash\", 'ddslick', \n\t\"jquery-growl\", 'css!charts/indicators/indicatorBuilder/indicatorBuilder.css'], function( $, rv, ind_json, _ ) {\n\n\t\tclass IndicatorWindow {\n\t\t\tconstructor(containerIDWithHash, ind_shrt, before_add_cb){\n\t\t\t\tconst curr_ind = JSON.parse(ind_json)[ind_shrt],\n\t\t\t\t\twin = this.init_window(containerIDWithHash, curr_ind, before_add_cb);\n\n\t\t\t\tthis.state = this.init_state(win, curr_ind, containerIDWithHash);\n\t\t\t\tthis.view = rv.bind(win, this.state);\n\t\t\t}\n\n\t\t\tinit_window(containerIDWithHash, ind, before_add_callback){\n\t\t\t\tconst cls_obj = this;\n\t\t\t\treturn $(\n\t\t\t\t\t'<div>\\\n    \t\t\t\t<table width=\"100%\">\\\n    \t\t\t\t\t<tr>\\\n\t\t\t          <td colspan=\"2\" rv-text=\"description\">\\\n\t\t\t          </td>\\\n\t\t\t        </tr>\\\n\t\t\t      </table>\\\n\t\t\t     </div>'\n\t\t\t  ).attr('title',ind.long_display_name).dialog({\n\t\t\t  \tautoOpen: true,\n          resizable: false,\n          width: 350,\n          height:400,\n          modal: true,\n          my: 'center',\n          at: 'center',\n          of: window,\n          dialogClass:'ind-ui-dialog',\n          buttons: [\n            {\n              text: \"OK\",\n              click: function() {\n                  const is_valid = cls_obj.checks.length === 1 ? cls_obj.checks[0]() : cls_obj.checks.reduce((a,b)=>{return a() && b();});\n                  \n                  if(!is_valid) return;\n                  \n                  const options = cls_obj.state.options;\n                  \n                  before_add_callback && before_add_callback();\n                  \n                  console.log(options);\n                  //Add ATR for the main series\n                  $(containerIDWithHash).highcharts().series[0].addIndicator(ind.short_display_name.toLowerCase(), options);\n\n                  $(this).dialog(\"close\");\n                  cls_obj.unbind();\n              }\n            },\n            {\n              text: \"Cancel\",\n              click: function() {\n                  $(this).dialog(\"close\");\n                  cls_obj.unbind();\n              }\n            }\n          ]\n\t\t\t  });\n\t\t\t}\n\t\t\n\t\t\tinit_state(root, indicator, containerIDWithHash){\n\t\t\t\tconst table = $(root).find(\"table\"),\n\t\t\t\t\tstate = {},\n\t\t\t\t\tchecks = [];\n\n\t\t\t\tconst creatElement = {\n\t\t\t\t\trow: (field_name, elem) => {\n\t\t\t\t\t\tconst row = $(\"<tr></tr>\");\n\t\t\t\t\t\tfield_name && row.append(\"<td><strong>\" + field_name + \"</strong></td>\");\n\t\t\t\t\t\trow.append(elem.appendTo($(\"<td></td>\")));\n\t\t\t\t\t\ttable.append(row);\n\t\t\t\t\t},\n\t\t\t\t\tinput: (f) => {\n\t\t\t\t\t\tstate.options[f.option_name] = f.default;\n\t\t\t\t\t\tconst elem = $(\"<input type='number' rv-value='options.\" + f.option_name + \" | parseInt'>\");\n\t\t\t\t\t\telem.attr(\"min\", f.min).attr(\"max\", f.max);\n\t\t\t\t\t\tchecks.push(() => {\n\t\t\t\t\t\t\tif(!_.inRange(this.state.options[f.option_name], f.min, f.max+1)){\n\t\t\t\t\t\t\t\t$.growl.error({\n\t\t\t\t\t\t\t\t\tmessage: \"Only numbers between \" + f.min + \" to \" + f.max + \" is allowed for \" + f.name + \"!\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t},\n\t\t\t\t\tcolor: (f) => {\n\t\t\t\t\t\tstate.options[f.option_name] = f.default;\n\t\t\t\t\t\tconst elem = $(\"<input type='button' class='stroke' rv-colorpicker='options.\" + f.option_name + \"'>\").button();\n\t\t\t\t\t\telem.css(\"background\",f.default);\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t},\n\t\t\t\t\tstrokeWidth: (f) => {\n\t\t\t\t\t\tstate.options[f.option_name] = f.default;\n\t\t\t\t\t\tconst elem = $('\\\n\t\t\t\t\t\t\t<select rv-selectmenu=\"options.' + f.option_name + ' | parseInt\" rv-selectmenu-width=\"150\">\\\n                <option value=\"1\">1</option>\\\n                <option value=\"2\">2</option>\\\n                <option value=\"3\">3</option>\\\n                <option value=\"4\">4</option>\\\n                <option value=\"5\">5</option>\\\n                <option value=\"6\">6</option>\\\n                <option value=\"7\">7</option>\\\n                <option value=\"8\">8</option>\\\n                <option value=\"9\">9</option>\\\n                <option value=\"10\">10</option>\\\n              </select>');\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t},\n\t\t\t\t\tdashStyle: (f) => {\n\t\t\t\t\t\tstate.options[f.option_name] = f.default;\n\t\t\t\t\t\tconst elem = $('\\\n\t\t\t\t\t\t\t<select class=\"dash\" rv-ddslick=\"options.' + f.option_name + '\">\\\n                <option value=\"Solid\" data-imagesrc=\"images/dashstyle/Solid.svg\" title=\"Solid\"></option>\\\n                <option value=\"ShortDash\" data-imagesrc=\"images/dashstyle/ShortDash.svg\"></option>\\\n                <option value=\"ShortDot\" data-imagesrc=\"images/dashstyle/ShortDot.svg\"></option>\\\n                <option value=\"ShortDashDot\" data-imagesrc=\"images/dashstyle/ShortDashDot.svg\"></option>\\\n                <option value=\"ShortDashDotDot\" data-imagesrc=\"images/dashstyle/ShortDashDotDot.svg\"></option>\\\n                <option value=\"Dot\" data-imagesrc=\"images/dashstyle/Dot.svg\"></option>\\\n                <option value=\"Dash\" data-imagesrc=\"images/dashstyle/Dash.svg\"></option>\\\n                <option value=\"LongDash\" data-imagesrc=\"images/dashstyle/LongDash.svg\"></option>\\\n                <option value=\"DashDot\" data-imagesrc=\"images/dashstyle/DashDot.svg\"></option>\\\n                <option value=\"LongDashDot\" data-imagesrc=\"images/dashstyle/LongDashDot.svg\"></option>\\\n                <option value=\"LongDashDotDot\" data-imagesrc=\"images/dashstyle/LongDashDotDot.svg\"></option>\\\n              </select>');\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t},\n\t\t\t\t\tappliedTo: (f) => {\n\t\t\t\t\t\tstate.options[f.option_name] = f.default;\n\t\t\t\t\t\tconst elem = $('\\\n\t\t\t\t\t\t\t<select rv-selectmenu=\"options.' + f.option_name + ' | parseInt\" rv-selectmenu-width=\"150\">\\\n\t              <option value=\"0\">OPEN</option>\\\n\t              <option value=\"1\">HIGH</option>\\\n\t              <option value=\"2\">LOW</option>\\\n\t              <option value=\"3\" selected>CLOSE</option>\\\n              </select>\\\n\t\t\t\t\t\t');\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t},\n\t\t\t\t\tlevels: (f) => {\n\t\t\t\t\t\tstate.options[f.option_name] = f.default;\n\t\t\t\t\t\tconst elem = $('\\\n\t\t\t\t\t\t\t<td colspan=\"2\">\\\n\t\t\t\t\t\t\t\t<div id=\"levels\">\\\n\t\t\t\t\t\t\t\t\t<table rv-level=\"options.levels\" class=\"display\">\\\n\t\t                <thead>\\\n\t\t                  <tr>\\\n\t\t                    <td>Level</td>\\\n\t\t                    <td>Stroke</td>\\\n\t\t                    <td>Stroke width</td>\\\n\t\t                    <td>Dash style</td>\\\n\t\t                  </tr>\\\n\t\t                </thead>\\\n\t\t                <tbody>\\\n\t\t                </tbody>\\\n\t\t              </table>\\\n\t\t             </div>\\\n\t             </td>\\\n\t\t\t\t\t\t');\n\t\t\t\t\t\tconst buttons = $('\\\n\t\t\t\t\t\t\t<tr>\\\n\t\t            <td><button id=\"level_delete\" rv-on-click=\"levels.delete\">Delete level(s)</button></td>\\\n\t\t            <td><button id=\"level_add\" rv-on-click=\"levels.add\">Add level</button></td>\\\n\t\t\t        </tr>\\\n\t\t\t\t\t\t');\n\t\t\t\t\t\ttable.append(buttons);\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t}\n\t\t\t\t} \n\n\t\t\t\tstate.description = indicator.description;\n\t\t\t\tstate.options = {};\n\t\t\t\tindicator.fields.forEach((field) => {\n\t\t\t\t\tcreatElement.row(field.name, creatElement[field.type](field));\n\t\t\t\t});\n\t\t\t\tstate.levels = {\n\t\t\t\t\tadd: (event,scope) => {\n\t\t\t\t\t\trequire([\"indicator_levels\"], (lvl) => {\n\t\t\t\t\t\t\tlvl.open(containerIDWithHash,(levels) => {\n\t\t\t\t\t\t\t\tscope.options.levels.push(levels[0]);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tdelete: (event, scope) => {\n\t\t\t\t\t\tconst levels = $.find(\".levels_selected\");\n\t\t\t\t\t\tif(levels.length == 0){\n\t\t\t\t\t\t\t$.growl.error({\n\t\t\t\t\t\t\t\tmessage: \"Select level(s) to delete!\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet lvl_cpy = scope.options.levels.slice();\n\t\t\t\t\t\t$.each(levels, (index, ele) =>{\n\t\t\t\t\t\t\tlvl_cpy.splice($(ele).data(\"index\")-index,1); //Weird, huh? :D\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconsole.log(lvl_cpy);\n\t\t\t\t\t\tscope.options.levels = lvl_cpy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t    /*binder for ddslick-select-menu*/\n\t\t    rv.binders.ddslick = {\n\t\t        priority: 102,\n\t\t        publishes: true,\n\t\t        bind: function(el) {\n\t\t            var publish = this.publish;\n\t\t            $(el).ddslick({\n\t\t                imagePosition: \"left\",\n\t\t                width: 151,\n\t\t                background: \"white\",\n\t\t                onSelected: function(data) {\n\t\t                    publish(data.selectedData.value);\n\t\t                }\n\t\t            });\n\t\t        },\n\t\t        unbind: function(el) {\n\t\t            $(el).ddslick('destroy');\n\t\t        }\n\t\t    };\n\n\t\t    rv.binders.level = {\n\t\t    \tpriority: 102,\n\t\t    \tpublishes: true,\n\t\t    \troutine: (el, levels) => {\n\t\t    \t\tconsole.log(\"called\",levels);\n\t\t    \t\tel = $(el);\n\n\t\t    \t\t//Remove existing values on change\n\t\t    \t\tel.find(\"tr\").each((index, row) => {\n\t\t    \t\t\t//Avoid removing heading.\n\t\t    \t\t\tif(index==0)\n\t\t    \t\t\t\treturn;\n\t\t    \t\t\t$(row).remove();\n\t\t    \t\t});\n\n\t\t    \t\tif(levels.length==0){\n\t\t    \t\t\tel.append($('<tr><td colspan=\"4\"><div class=\"no-data\">No data available in table</div></td></tr>'));\n\t\t    \t\t\treturn;\n\t\t    \t\t}\n\t\t    \t\t$.each(levels, (index, value) => {\n\t\t    \t\t\tconst row = $('\\\n\t\t    \t\t\t\t<tr>\\\n\t\t\t    \t\t\t\t<td>' + value.level + '</td>\\\n\t\t\t    \t\t\t\t<td><div style=\"background-color: ' + value.stroke + ';width:100%;height:20px;\"></div></td>\\\n\t\t\t    \t\t\t\t<td>' + value.strokeWidth + '</td>\\\n\t\t\t    \t\t\t\t<td><div style=\"width:50px;overflow:hidden;margin: 0 auto;height: 20px;\"><img src=\"images/dashstyle/' + value.dashStyle + '.svg\" /></div</td>\\\n\t\t\t    \t\t\t</tr>\\\n\t\t    \t\t\t');\n\t\t    \t\t\trow.click( function() {\n\t\t    \t\t\t\t$(this).toggleClass(\"levels_selected\");\n\t\t    \t\t\t}).data(\"index\",index);\n\t\t    \t\t\tel.append(row);\n\t\t    \t\t});\n\t\t    \t}\n\t\t    }\n\n\t\t    // Covert value to int\n\t\t    rv.formatters.parseInt = {\n\t\t        publish: function(value) {\n\t\t            return parseInt(value);\n\t\t        }\n\t\t    };\n\n\t\t\t\tthis.checks = checks;\n\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tunbind() {\n\t      this.view && this.view.unbind();\n\t      this.view = null;\n\t    }\n\n\t\t}\n\n\t\treturn {\n\t\t\topen: (containerIDWithHash, ind_shrt, before_add_cb) => new IndicatorWindow(containerIDWithHash, ind_shrt, before_add_cb)\n\t\t}\n});\n"]}